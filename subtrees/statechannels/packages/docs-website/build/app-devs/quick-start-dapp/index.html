<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.59">
<link rel="search" type="application/opensearchdescription+xml" title="statechannels docs" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Chivo&display=swap">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Quick start (Dapp) | statechannels docs</title><meta data-react-helmet="true" property="og:image" content="https://docs.statechannels.org/img/undraw_online.svg"><meta data-react-helmet="true" property="twitter:image" content="https://docs.statechannels.org/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for statechannels docs"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Quick start (Dapp) | statechannels docs"><meta data-react-helmet="true" name="description" content="By using our reference state channels wallet implementation, you will be able to rapidly develop a statechannels-powered Dapp that does not need to manage keys, interface with an ethereum provider or understand nitro-protocol at all. Instead, it only needs to target our channel-client API."><meta data-react-helmet="true" property="og:description" content="By using our reference state channels wallet implementation, you will be able to rapidly develop a statechannels-powered Dapp that does not need to manage keys, interface with an ethereum provider or understand nitro-protocol at all. Instead, it only needs to target our channel-client API."><meta data-react-helmet="true" property="og:url" content="https://docs.statechannels.org/app-devs/quick-start-dapp"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://docs.statechannels.org/app-devs/quick-start-dapp"><link rel="stylesheet" href="/styles.e0b33fa7.css">
<link rel="preload" href="/styles.8e0db825.js" as="script">
<link rel="preload" href="/runtime~main.27671965.js" as="script">
<link rel="preload" href="/main.03452097.js" as="script">
<link rel="preload" href="/2.4ee922d7.js" as="script">
<link rel="preload" href="/3.4c7fc1f6.js" as="script">
<link rel="preload" href="/4.a5988223.js" as="script">
<link rel="preload" href="/1be78505.75ec5049.js" as="script">
<link rel="preload" href="/369.23cc9095.js" as="script">
<link rel="preload" href="/ec1ed54d.db84b9ba.js" as="script">
<link rel="preload" href="/17896441.61fde53e.js" as="script">
<link rel="preload" href="/5166c5b4.f18e5bd5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg"><strong class="navbar__title">statechannels docs</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a class="navbar__item navbar__link" href="/typescript-api/index">Typescript API</a><a class="navbar__item navbar__link" href="/contract-api/contract-inheritance">Contract API</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg"><strong class="navbar__title">statechannels docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/typescript-api/index">Typescript API</a></li><li class="menu__list-item"><a class="menu__link" href="/contract-api/contract-inheritance">Contract API</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">statechannels docs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/products">Our products</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">App Developers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/app-devs/app-devs-intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/app-devs/quick-start-contracts">Quick start (contracts)</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/app-devs/quick-start-dapp">Quick start (Dapp)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/app-devs/hook-up-messaging">Hook up your messaging layer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/app-devs/make-api-calls">Make Wallet API calls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/app-devs/recommended-patterns">Recommended patterns</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Protocol Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-docs/wallet-devs-intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-docs/quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-docs/tutorial">Tutorial</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Protocol Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-tutorial/execute-state-transitions">Execute state transitions off chain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-tutorial/deposit-assets">Deposit Assets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-tutorial/finalize-a-channel-happy">Finalize a channel (happy)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-tutorial/finalize-a-channel-sad">Finalize a channel (sad)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-tutorial/understand-channel-storage">Understand channel storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-tutorial/clear-a-challenge">Clear a challenge</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-tutorial/outcomes">Understand Outcomes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-tutorial/release-assets">Release assets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/protocol-tutorial/off-chain-funding">Off-chain funding</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Implementation Notes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/implementation-notes/contract-devs-intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/implementation-notes/asset-holder">AssetHolder.sol</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/implementation-notes/force-move">ForceMove.sol</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/implementation-notes/nitro-adjudicator">NitroAdjudicator.sol</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/implementation-notes/null-app">Null app</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/implementation-notes/single-asset-payments">SingleAssetPayments.sol</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Quick start (Dapp)</h1></header><div class="markdown"><p>By using our reference state channels wallet implementation, you will be able to rapidly develop a statechannels-powered Dapp that does not need to manage keys, interface with an ethereum provider or understand nitro-protocol at all. Instead, it only needs to target our channel-client API.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installing"></a>Installing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installing" title="Direct link to heading">#</a></h2><p>You will want to add both <code>@statechannels/channel-client</code> and <code>@statechannels/iframe-channel-provider</code> to your project:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token plain">&gt; yarn add @statechannels/channel-client @statechannels/iframe-channel-provider</span></div></div></div></div></div><p>Think about the client as exposing a friendly API for your Dapp, and the provider as a lower level bit of plumbing that it uses to connect to our wallet.</p><p>The wallet code will be downloaded by the browser and executed inside an iFrame. The channel-provider uses <code>postMessage</code> under the hood to communicate with the wallet. Set it up as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">// Attaches the channel provider to the window object</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">require</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;@statechannels/iframe-channel-provider&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="enabling-the-channel-provider"></a>Enabling the channel provider<a aria-hidden="true" tabindex="-1" class="hash-link" href="#enabling-the-channel-provider" title="Direct link to heading">#</a></h2><p>The channel provider needs to be pointed at our hosted wallet:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">await</span><span class="token plain"> </span><span class="token dom variable" style="color:#d7deea">window</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">channelProvider</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">mountWalletComponent</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;https://xstate-wallet.statechannels.org/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span></div></div></div></div></div><p>This step mounts the wallet iFrame in your Dapp, configures communication and performs an initial handshake with the wallet.</p><p>At some point in your user flow, you will want to enable the wallet:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">await</span><span class="token plain"> </span><span class="token dom variable" style="color:#d7deea">window</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">channelProvider</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">enable</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span></div></div></div></div></div><p>If everything is setup correctly, you should see the statechannels wallet UI:</p><p align="center"><img alt="Wallet UI" src="/img/wallet-ui.png" class="drop-shadow"></p><p>Because this popup will be triggered, to maintain a good UX you should only call <code>window.channelProvider.enable()</code> when the user clicks a button.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="app---wallet-security"></a>App &lt;-&gt; Wallet security<a aria-hidden="true" tabindex="-1" class="hash-link" href="#app---wallet-security" title="Direct link to heading">#</a></h2><p>Having the wallet served in an iFrame from a different domain to the app is an important component from a security standpoint. The app can only send and receive messages to the wallet, and cannot otherwise access its code or storage. Furthermore, it means the app &lt;-&gt; wallet communication is cross-origin, and the wallet can associate policies (such as whitelists) and other data (such as channels and keys) to each domain.</p><p>Ethereum wallets will typically prompt the user, when triggered by an application, to approve access to the accounts it controls for the domain that application is served from. Wallets should not implicitly trust applications or grant them access to sign away assets, because unknown applications could contain malicious code and put those asssets at risk.</p><p>The same is true for our wallet: when the <code>.enable()</code> call is made, the user is asked for approval (see above).</p><p>There are a few differences between a state channel wallet and an Ethereum wallet, which are important to understand.</p><p>Because state channel applications are capable of very rapid throughput of state updates (or &quot;Layer 2 transactions&quot;), it would not be feasible to ask for user approval for each one. It is for this reason that our wallet will create an &quot;ephemeral key&quot; to sign state updates (sliently), instead of using your Ethereum key.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>This ephemeral key is only used for creating signatures that will be recovered in our adjudicator contract, and isn&#x27;t designed to <em>directly</em> control any on chain funds. When it comes to releasing assets on chain, however, the money still goes to your Ethereum account when your state channel closes.</p></div></div><p>Our wallet uses the concept of a &quot;Domain Budget&quot; to further reduce the amount of user interaction that is required. The budget can be <a href="/../typescript-api/channel-client.channelclient.approvebudgetandfund">approved</a> on the user&#x27;s first visit to an application, and specifies a maximum send and maximum receive amount for each asset type (e.g. ETH). It then only needs to be administered or &quot;topped-up&quot; when the maximum amounts are reached. Otherwise, the wallet will not prompt the user at all when creating and closing channels, but will silently perform the necessary steps to do so. You can see budgets in action by trying out our <a href="https://web3torrent.statechannels.org/" target="_blank" rel="noopener noreferrer">Web3Torrent</a> app.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-09-14T23:28:53.000Z" class="docLastUpdatedAt_217_">9/14/2020</time> by <strong>Caleb Ditchfield</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/app-devs/quick-start-contracts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Quick start (contracts)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/app-devs/hook-up-messaging"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Hook up your messaging layer Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installing" class="table-of-contents__link">Installing</a></li><li><a href="#enabling-the-channel-provider" class="table-of-contents__link">Enabling the channel provider</a></li><li><a href="#app---wallet-security" class="table-of-contents__link">App &lt;-&gt; Wallet security</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" src="/img/logo.svg"></div><div>Copyright Â© 2020</div></div></div></footer></div>
<script src="/styles.8e0db825.js"></script>
<script src="/runtime~main.27671965.js"></script>
<script src="/main.03452097.js"></script>
<script src="/2.4ee922d7.js"></script>
<script src="/3.4c7fc1f6.js"></script>
<script src="/4.a5988223.js"></script>
<script src="/1be78505.75ec5049.js"></script>
<script src="/369.23cc9095.js"></script>
<script src="/ec1ed54d.db84b9ba.js"></script>
<script src="/17896441.61fde53e.js"></script>
<script src="/5166c5b4.f18e5bd5.js"></script>
</body>
</html>