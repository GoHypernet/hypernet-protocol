(window.webpackJsonp=window.webpackJsonp||[]).push([[216],{268:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var a=n(2),o=n(6),i=(n(0),n(420)),r={id:"single-asset-payments",title:"SingleAssetPayments.sol"},c={unversionedId:"implementation-notes/single-asset-payments",id:"implementation-notes/single-asset-payments",isDocsHomePage:!1,title:"SingleAssetPayments.sol",description:"Although Nitro supports a mixture of ETH and ERC20 tokens to be escrowed into a channel, a simple payment application would most likely be restricted to a single asset type. There is no appData for such an application, as the state machine is encoded only by conditions on the default outcome of each state update. In short, when it is your move you may unilaterally transfer some of the assets that are currently allocated to you, to another participant. You may not decrease any other participants allocation.",source:"@site/docs/implementation-notes/single-asset-payments.md",permalink:"/implementation-notes/single-asset-payments",lastUpdatedBy:"Caleb Ditchfield",lastUpdatedAt:1600126133,sidebar:"docs",previous:{title:"Null app",permalink:"/implementation-notes/null-app"}},l=[{value:"Implementation",id:"implementation",children:[]}],s={rightToc:l};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Although Nitro supports a mixture of ETH and ERC20 tokens to be escrowed into a channel, a simple payment application would most likely be restricted to a single asset type. There is no ",Object(i.b)("inlineCode",{parentName:"p"},"appData")," for such an application, as the state machine is encoded only by conditions on the default outcome of each state update. In short, when it is your move you may unilaterally transfer some of the assets that are currently allocated to you, to another participant. You may not decrease any other participants allocation."),Object(i.b)("h2",{id:"implementation"},"Implementation"),Object(i.b)("p",null,"Please see the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"../contract-api/natspec/SingleAssetPayments"}),"API"),"."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Decode the information"),Object(i.b)("li",{parentName:"ul"},"Revert if (on either state):",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"There is more than one asset encoded"),Object(i.b)("li",{parentName:"ul"},"The ",Object(i.b)("inlineCode",{parentName:"li"},"assetOutcome")," is not an allocation"),Object(i.b)("li",{parentName:"ul"},"The ",Object(i.b)("inlineCode",{parentName:"li"},"allocation")," has exactly ",Object(i.b)("inlineCode",{parentName:"li"},"nParticipants")," outcomes"))),Object(i.b)("li",{parentName:"ul"},"Checks that the sum of assets has not changed"),Object(i.b)("li",{parentName:"ul"},"For all non-movers, check:",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"The allocation amount has not decreased"),Object(i.b)("li",{parentName:"ul"},"The destination has not changed"))),Object(i.b)("li",{parentName:"ul"},"For the mover, check:",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"[optional / not implemented]"," the destination has not changed"),Object(i.b)("li",{parentName:"ul"},"[redundant]"," the balance has not increased (covered by the sum + other balances not decreasing)")))),Object(i.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"warning")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"This implementation assumes that the participant in position ",Object(i.b)("inlineCode",{parentName:"p"},"k := turnNumB % nParticipants")," has the right to decrease the balance of ",Object(i.b)("inlineCode",{parentName:"p"},"allocation[k].destination"),". When opening the channel, each client should check they are happy with this before proceeding with channel funding. In most applications one would have ",Object(i.b)("inlineCode",{parentName:"p"},"allocation[k].destination = participants[k]"),"."))))}p.isMDXComponent=!0},420:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return d}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),p=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},m=function(e){var t=p(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=p(n),b=a,d=m["".concat(r,".").concat(b)]||m[b]||u[b]||i;return n?o.a.createElement(d,c(c({ref:t},s),{},{components:n})):o.a.createElement(d,c({ref:t},s))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=b;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var s=2;s<i;s++)r[s]=n[s];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);