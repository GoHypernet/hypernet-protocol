(window.webpackJsonp=window.webpackJsonp||[]).push([[297],{348:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return b}));var a=n(2),r=n(6),c=(n(0),n(420)),l={id:"channel-client.channelclient.onchannelupdated",title:"ChannelClient.onChannelUpdated() method",hide_title:!0},i={unversionedId:"typescript-api/channel-client.channelclient.onchannelupdated",id:"typescript-api/channel-client.channelclient.onchannelupdated",isDocsHomePage:!1,title:"ChannelClient.onChannelUpdated() method",description:"@statechannels/channel-client &gt; ChannelClient &gt; onChannelUpdated",source:"@site/docs/typescript-api/channel-client.channelclient.onchannelupdated.md",permalink:"/typescript-api/channel-client.channelclient.onchannelupdated"},o=[{value:"ChannelClient.onChannelUpdated() method",id:"channelclientonchannelupdated-method",children:[]},{value:"Parameters",id:"parameters",children:[]},{value:"Remarks",id:"remarks",children:[]}],p={rightToc:o};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/typescript-api/channel-client"}),"@statechannels/channel-client")," ",">"," ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/typescript-api/channel-client.channelclient"}),"ChannelClient")," ",">"," ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/typescript-api/channel-client.channelclient.onchannelupdated"}),"onChannelUpdated")),Object(c.b)("h2",{id:"channelclientonchannelupdated-method"},"ChannelClient.onChannelUpdated() method"),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.")),Object(c.b)("p",null,"Registers a callback that will fire when a state channel is updated."),Object(c.b)("b",null,"Signature:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),"onChannelUpdated(callback: (result: ChannelUpdatedNotification['params']) => void): UnsubscribeFunction;\n")),Object(c.b)("h2",{id:"parameters"},"Parameters"),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Parameter"),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Type"),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"callback"),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"(result: ",Object(c.b)("a",Object(a.a)({parentName:"td"},{href:"/typescript-api/client-api-schema.channelupdatednotification"}),"ChannelUpdatedNotification"),"[","'params'","]",") =",">"," void"),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A function that accepts a ChannelUpdatedNotification.")))),Object(c.b)("b",null,"Returns:"),Object(c.b)("p",null,Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/typescript-api/channel-client.unsubscribefunction"}),"UnsubscribeFunction")),Object(c.b)("p",null,"A function that will unregister the callback when invoked."),Object(c.b)("h2",{id:"remarks"},"Remarks"),Object(c.b)("p",null,"The ChannelUpdated event is emitted when any of the following occurs: ",Object(c.b)("ul",null," ",Object(c.b)("li",null," A state is received via ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/typescript-api/channel-client.channelclient.updatechannel"}),"updateChannel()"))," ",Object(c.b)("li",null," A state is received from another participant via ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/typescript-api/channel-client.channelclient.pushmessage"}),"pushMessage()"))," ",Object(c.b)("li",null," Changes to the state of the blockchain are detected (e.g funding or challenges)")," ")),Object(c.b)("p",null,"In the first two cases, this notification is only triggered when the wallet verifies that the state causes the 'top state' to change."),Object(c.b)("p",null,"The 'top state' is the state drawn from the set of supported states that has the highest turn number."),Object(c.b)("p",null,"(We have glossed over / left undefined what happens in the case where there is more than one top state)."),Object(c.b)("p",null,"In particular, this means that ",Object(c.b)("ul",null," ",Object(c.b)("li",null," incorrectly formatted")," ",Object(c.b)("li",null," incorrectly signed")," ",Object(c.b)("li",null," otherwise unsupported")," ",Object(c.b)("li",null," out-of-date")," ")),Object(c.b)("p",null,"states will not trigger this notification. Similarly, a countersignature on an already-supported state will not trigger this notification ",Object(c.b)("b",null,"unless")," it means that a conclusion proof is now available."))}b.isMDXComponent=!0},420:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),b=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=b(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},h=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),s=b(n),h=a,d=s["".concat(l,".").concat(h)]||s[h]||u[h]||c;return n?r.a.createElement(d,i(i({ref:t},p),{},{components:n})):r.a.createElement(d,i({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,l=new Array(c);l[0]=h;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var p=2;p<c;p++)l[p]=n[p];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);